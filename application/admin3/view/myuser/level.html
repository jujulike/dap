{extend name="public/base" /}
<script src="../../../../../public/ueditor/ueditor.all.js"></script>
{block name="body"}
<script src="__PUBLIC__/admin/js/jquery-2.1.1.min.js"></script>
<script src="__PUBLIC__/home/layui/layui.js"></script>
<link href="__PUBLIC__/home/layui/css/layui.css" rel="stylesheet">
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox-content">
                <form action="{:url()}" method="post" class="form-horizontal" enctype="multipart/form-data">
                
                <div class="panel-body">
                    <div class="form-group">
                        <label class="col-xs-12 col-sm-3 col-md-2 control-label">会员等级：</label>
                        <div class="col-sm-9 col-xs-12">
                         <table class="table table-hover" id="attrTable">
                            <thead class="text-c">
                                <tr>
                                    <th></th>
                                    <th>级别名称</th>
                                    <th>所需积分</th>
                                </tr>
                            </thead>
                            <tbody>
                                {volist name="rebate" id="vo"}
                                <tr>
                                    <td><a href="javascript:;" onclick="delLevel(this)">[-]等级{$i}</a></td>
                                    <td><input type="text" class="form-control" name="rebate[{$i}][name]" value="{$vo.name}"/></td>
                                    <td><input type="number" min="0" class="form-control" name="rebate[{$i}][score]" value="{$vo.score}"/></td>
                                </tr>
                                {/volist}
                                        
                            </tbody>
                        </table>
                            <a href="javascript:;" onclick="addLevel(this)"><i class="fa fa-plus"></i>添加等级</a>

                            <p>注：多个级别从小到大添加</p>
                        </div>
                        
                    </div>
                </div>
                <div class="form-group">
                        <div class="col-sm-9 col-sm-offset-2">

                        <button class="btn btn-primary " id="submit" type="submit" target-form="form-horizontal">确 定</button>
                        </div>
                </div>
                </form>
            </div>
        </div>
    </div>
</div>
{/block}

{block name="script"}
<script>
            var i =0;
            $(function(){
                i = $("#attrTable tbody").find("tr").length;
            })
            var attrHtml = '<tr>\
                            <td><a href="javascript:;" onclick="delLevel(this)">[-]等级##</a></td>\
                            <td><input type="text" class="form-control" name="rebate[##][name]"/></td>\
                            <td><input type="number" min="0" class="form-control" name="rebate[##][score]"/></td>\
                            </tr>';
            function addLevel(){
                ++i;
                $("#attrTable tbody").append(attrHtml.replace(/##/g, i));
            }
            function delLevel(obj){
                var num = $(obj).parent().parent().index() + 1;
                var all = $("#attrTable tbody tr").length;
                i--;
                $(obj).parent().parent().remove();
                    
            }
</script>


{/block}

