<div class="form-group">
                        <label class="col-sm-2 control-label">商品相册</label>
                        <button type="button" class="layui-btn layui-btn-primary pull-left" id="slide-pc">选择多图</button>
                    </div>
<div class="form-group">
                        <label class="col-sm-2 control-label">图片列表</label>
                        <div class="pic-more">
                            <ul class="pic-more-upload-list" id="slide-pc-priview">
                                {if $photo_string}
                         {volist name="photo_string" id="vo"}
                                <li class="item_img"><div class="operate">
                                    <i class="toleft layui-icon"></i>
                                    <i class="toright layui-icon"></i>
                                    <i  class="close layui-icon"></i></div>
                                    <img src="{$vo}" class="img" >
                                    <input type="hidden" name="pc_src[]" value="{$vo}" />
                                </li>
                                {/volist}{/if}
                            </ul>
                        </div>
                    </div>
<script>
    layui.use('upload', function(){
        var $ = layui.jquery;
        var upload = layui.upload;

        upload.render({
            elem: '#slide-pc',
            url: '{:url("upload/upload")}',
            size: 100000,
            exts: 'jpg|png|jpeg',
            multiple: true,
            before: function(obj) {
                layer.msg('图片上传中...', {
                    icon: 16,
                    shade: 0.01,
                    time: 0
                })
            },
            done: function(res) {
                layer.close(layer.msg());//关闭上传提示窗口
                if(res.status == 0) {
                    return layer.msg(res.message);
                }
              /*  var p = $('.pj-picture em').html();
                p&#45;&#45;;
                if(p == 0)
                {
                    $('#slide-pc').attr('disabled','disabled');
                }*/
                //$('#slide-pc-priview').append('<input type="hidden" name="pc_src[]" value="' + res.filepath + '" />');
                $('#slide-pc-priview').append('<li class="item_img">' +
                    '<div class="operate"><i class="toleft layui-icon">' +
                    '</i><i class="toright layui-icon"></i>' +
                    '<i  class="close layui-icon"></i>' +
                    '</div><img src="' + res.filepath + '" class="img" >' +
                    '<input type="hidden" name="pc_src[]" value="' + res.filepath + '" /></li>');
              /*  $('.pj-picture em').html( p );*/
            }
        });
    });
    //点击多图上传的X,删除当前的图片
    $("body").on("click",".close",function(){
       /* var p = $('.pj-picture em').html();*/
        $(this).closest("li").remove();
      /*  p++;
        $('.pj-picture em').html( p );*/

    });
    //多图上传点击<>左右移动图片
    $("body").on("click",".pic-more ul li .toleft",function(){
        var li_index=$(this).closest("li").index();
        if(li_index>=1){
            $(this).closest("li").insertBefore($(this).closest("ul").find("li").eq(Number(li_index)-1));
        }
    });
    $("body").on("click",".pic-more ul li .toright",function(){
        var li_index=$(this).closest("li").index();
        $(this).closest("li").insertAfter($(this).closest("ul").find("li").eq(Number(li_index)+1));
    });
</script>